# Pocket Portals - Task Definitions
# YAML-based task configuration for CrewAI

narrate_scene:
  description: |
    The player has taken this action: "{action}"

    Respond with a vivid, sensory-rich description of what happens next.

    FORMAT YOUR RESPONSE WITH CLEAR STRUCTURE:
    - Use short paragraphs (2-3 sentences each)
    - Add blank lines between paragraphs for readability
    - Lead with the most immediate sensory detail
    - End with a hook or tension point

    Consider:
    - Visual details (what does the player see?)
    - Sounds (what do they hear?)
    - Atmosphere and mood
    - Immediate consequences

    Keep your response to 2-3 short paragraphs, maintaining an immersive
    second-person perspective ("You see...", "You feel...").
  expected_output: "A well-structured 2-3 paragraph narrative with clear spacing between paragraphs"
  agent: narrator

resolve_action:
  description: |
    The player attempts: "{action}"
    Difficulty: {difficulty} or higher to succeed

    Determine if a roll is needed. If yes, state the target number.
    Report the outcome briefly.

    Use terse, numbers-first language. State the target, then the outcome.
  expected_output: "Brief mechanical resolution with numbers (under 10 words)"
  agent: keeper

add_commentary:
  description: |
    Current situation: "{situation}"

    Provide a brief, absurdist observation about this situation.
    Focus on:
    - Ironic juxtaposition
    - Statistical improbability
    - Deadpan acknowledgment of danger
    - Meta-commentary on adventurer life

    One to two sentences maximum. Dry delivery.
  expected_output: "A brief comedic observation"
  agent: jester

present_hook:
  description: |
    Adventure type: "{genre}"

    Present an adventure hook as tavern gossip. Include:
    - The situation or problem
    - Who's involved
    - What's at stake
    - Why an adventurer might care

    Speak as Theron, in conversational tavern style.
    End with a question or invitation to act.
  expected_output: "A compelling adventure hook in Theron's voice"
  agent: innkeeper_theron

introduce_quest:
  description: |
    A new adventurer has arrived at your tavern. Based on their description,
    introduce yourself briefly and present a quest hook that would interest them.

    Adventurer description: "{character_description}"

    Remember:
    - Open with an observation about the weather or tavern
    - Present ONE specific quest with concrete details
    - Include a price or reward
    - End with their choice, not a command
  expected_output: |
    A brief introduction from Innkeeper Theron (2-4 sentences) presenting
    a single quest hook with specific details (location, payment, danger).
  agent: innkeeper_theron
