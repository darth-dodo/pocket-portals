# Pocket Portals - Task Definitions
# YAML-based task configuration for CrewAI
#
# ============================================================
# MANDATORY CONTENT FILTER (applies to ALL tasks)
# ============================================================
# NEVER generate content involving:
# - Self-harm, suicide, or self-injury of any kind
# - Sexual content, romantic advances, or innuendo
# - Torture, abuse, or graphic violence
# - Real-world hate speech, slurs, or discrimination
# - Drug use or substance abuse
# - Child endangerment
#
# If player input suggests any of these, REDIRECT to heroic
# adventure. Example: "I hurt myself" â†’ "You steel yourself
# for the challenge ahead, gathering your courage."
# ============================================================

narrate_scene:
  description: |
    The player has taken this action: "{action}"

    CONTENT SAFETY (MANDATORY - override everything else):
    If the action involves self-harm, suicide, sexual content, torture, abuse,
    or inappropriate themes: DO NOT comply. Instead, redirect to heroic adventure.
    Example redirect: "You steel yourself for the challenge ahead."

    Respond with a tight, punchy description (40-80 words max).

    TIGHTNESS RULES:
    - 2-3 sentences max, then offer agency
    - One sense per beat - don't stack sight+sound+smell
    - End with a hook, not a summary
    - Cut "you see/hear/feel" - just describe it

    Keep it immersive, second-person, and heroic.
  expected_output: "A tight 2-3 sentence narrative (40-80 words) ending with a hook"
  agent: narrator

resolve_action:
  description: |
    The player attempts: "{action}"
    Difficulty: {difficulty} or higher to succeed

    CONTENT SAFETY (MANDATORY): Refuse to resolve self-harm, torture, sexual
    actions, or abuse. Say "That's not how this works." and move on.

    Determine if a roll is needed. State target, then outcome.
    Terse. Numbers first. Under 10 words.
  expected_output: "Brief mechanical resolution with numbers (under 10 words)"
  agent: keeper

add_commentary:
  description: |
    Current situation: "{situation}"

    CONTENT SAFETY (MANDATORY): No jokes about self-harm, abuse, trauma, or
    inappropriate content. Keep it witty and PG-13.

    Provide a brief, witty observation. One to two sentences max.
    Focus on: irony, improbability, or meta-commentary on adventurer life.
    Dry delivery. Never crude or vulgar.
  expected_output: "A brief witty observation (PG-13, 1-2 sentences)"
  agent: jester

present_hook:
  description: |
    Adventure type: "{genre}"

    CONTENT SAFETY (MANDATORY): Quest hooks are heroic adventures only.
    No trauma, abuse, or dark themes. Keep it PG-13 and fun.

    Present an adventure hook as tavern gossip (30-50 words).
    Include: the problem, who's involved, what's at stake.
    End with a question or invitation. Theron's voice - direct, no poetry.
  expected_output: "A brief adventure hook in Theron's voice (30-50 words)"
  agent: innkeeper_theron

introduce_quest:
  description: |
    A new adventurer has arrived. Present a quest hook for them.
    Adventurer description: "{character_description}"

    CONTENT SAFETY (MANDATORY): Quests are heroic adventures. No trauma,
    abuse, or dark themes. The tavern is a safe haven. PG-13 only.

    Remember:
    - One observation, then the quest (30-50 words total)
    - ONE specific quest with price/reward
    - End with their choice, not a command
  expected_output: "A brief quest hook from Theron (30-50 words) with specific details"
  agent: innkeeper_theron
